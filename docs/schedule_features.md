# 日程清单功能文档 (Schedule Features)

本文档详细说明了应用中的日程清单功能，包括功能特性、架构设计以及代码实现细节。

## 1. 功能概述

日程清单功能允许用户管理日常任务和待办事项，提供直观的日历视图及任务列表管理。

主要特性包括：
- **日历视图**：通过迷你日历快速查看和选择日期的日程。
- **任务分类**：自动分类展示 "今天"、"过期"、"即将到来" 和 "已完成" 的任务。
- **状态管理**：支持标记任务完成、编辑任务详情及删除任务。
- **提醒功能**：支持设置任务提醒（分钟、小时、天）。

## 2. 核心逻辑

### 2.1 数据存储与管理
- 数据由 `ScheduleStore` 统一管理，持久化存储在本地 JSON 文件中。
- `ScheduleItem` 结构包含：标题、描述、时间范围、提醒设置、完成状态等。

### 2.2 任务分组 (Grouping)
- **Today (今天)**: 开始时间为当天的未完成任务。
- **Overdue (过期)**: 开始时间早于当前时间且未完成的任务。
- **Upcoming (即将到来)**: 开始时间在今天之后的未完成任务。
- **Completed (已完成)**: 所有已标记为完成的任务。

### 2.3 交互逻辑
- **添加任务**: 通过浮动按钮或快捷键 (`Cmd+D`) 打开添加对话框。
- **编辑任务**: 点击任务项的编辑按钮，复用添加对话框进行修改。
- **删除任务**: 支持单个删除，需二次确认。
- **完成/取消完成**: 点击任务前的复选框切换状态。

## 3. 架构与实现

### 3.1 目录结构

```
src/
  ├── store/
  │   └── ScheduleStore.ts    # MobX Store，管理日程数据和 CRUD 操作
  ├── components/
  │   └── Schedule/
  │       ├── SchedulePage.tsx    # 主页面组件 (全屏视图)
  │       ├── MiniCalendar.tsx    # 左侧迷你日历组件
  │       └── AddScheduleDialog.tsx # 添加/编辑日程弹窗
  └── types/                  # 类型定义 (ScheduleItem)
```

### 3.2 页面重构
原 `SchedulePanel` (侧边栏抽屉) 已重构为 `SchedulePage` (全屏页面)，以提供更沉浸的管理体验。

### 3.3 关键组件
- **SchedulePage**: 负责整体布局，左侧为日历和过滤器，右侧为任务列表。
- **ScheduleStore**:
    - `schedules`: 所有日程列表。
    - `filter`: 当前过滤条件 ('all' | 'today' | 'upcoming' | 'overdue' | 'completed')。
    - `groupedSchedules`: 根据过滤条件计算出的分组数据 (Computed)。

## 4. UI 设计

- **布局**: 采用经典的左侧导航/日历 + 右侧内容列表的双栏布局。
- **视觉风格**:
    - "过期" 任务使用红色高亮警示。
    - "已完成" 任务使用灰色及删除线样式。
    - 选中日期在日历上高亮显示，有日程的日期在日历下方显示标记点。

## 5. 注意事项

- **页面切换**: 从其他页面切换到日程页面时，会调用 `uiStore.setActivePage('schedule')`。
- **数据加载**: `SchedulePage` 挂载时会自动触发 `scheduleStore.loadSchedules()` 确保数据最新。
