# 日程清单功能文档 (Schedule Features)

本文档详细说明了应用中的日程清单功能，包括功能特性、架构设计以及代码实现细节。

## 1. 功能概述

日程清单功能允许用户高效管理日常任务和待办事项，提供直观的日历视图及任务列表管理。

主要特性包括：
- **快速添加 (Quick Add)**: 列表顶部提供快速输入框，按回车即可快速创建任务。
- **日历视图**: 通过左侧迷你日历快速查看和选择日期的日程。
- **智能分类**: 自动分类展示 "今天"、"过期"、"即将到来" 和 "已完成" 的任务。
- **状态可视化**: 任务卡片通过左侧色条直观展示任务状态（今天、过期、未来）。
- **提醒功能**: 支持设置任务提醒（分钟、小时、天）。

## 2. 核心逻辑

### 2.1 数据存储与管理
- 数据由 `ScheduleStore` 统一管理，持久化存储在本地 JSON 文件中。
- `ScheduleItem` 结构包含：标题、描述、时间范围、提醒设置、完成状态等。

### 2.2 任务分组 (Grouping)
- **Today (今天)**: 开始时间为当天的未完成任务。
- **Overdue (过期)**: 开始时间早于当前时间且未完成的任务。
- **Upcoming (即将到来)**: 开始时间在今天之后的未完成任务。
- **Completed (已完成)**: 所有已标记为完成的任务。

### 2.3 交互逻辑
- **快速添加**: 在顶部输入框输入标题并回车，默认创建下一小时开始的任务。
- **添加详情**: 点击右上角 "添加日程" 按钮打开完整对话框，支持设置详细时间与提醒。
- **编辑任务**: 点击任务卡片或悬浮显示的编辑按钮进行修改。
- **删除任务**: 悬浮显示删除按钮，点击后需二次确认。
- **完成/取消完成**: 点击任务前的复选框切换状态，支持防误触。

## 3. 架构与实现

### 3.1 目录结构

```
src/
  ├── store/
  │   └── ScheduleStore.ts    # MobX Store，管理日程数据和 CRUD 操作
  ├── components/
  │   └── Schedule/
  │       ├── SchedulePage.tsx    # 主页面组件 (全屏视图)
  │       ├── MiniCalendar.tsx    # 左侧迷你日历组件
  │       └── AddScheduleDialog.tsx # 添加/编辑日程弹窗
  └── types/                  # 类型定义 (ScheduleItem)
```

### 3.2 页面布局
`SchedulePage` 采用双栏布局：
- **左侧边栏**: 包含迷你日历和过滤器导航（全部、今天、即将到来、过期、已完成）。
- **右侧内容区**: 
    - **Header**: 显示当前视图标题及 "添加日程" 按钮。
    - **Quick Add**: 顶部固定快速添加输入框。
    - **List**: 分组展示的任务列表，支持滚动。

### 3.3 关键组件
- **SchedulePage**: 负责整体布局与交互逻辑 (Quick Add, Filtering, Actions)。
- **ScheduleStore**:
    - `schedules`: 所有日程列表。
    - `filter`: 当前过滤条件。
    - `groupedSchedules`: 根据过滤条件计算出的分组数据 (Computed)。

## 4. UI 设计

- **视觉风格**:
    - **状态色条**: 卡片左侧 `border-left` 指示状态（Primary: 今天/进行中, Red: 过期, Blue: 未来, Grey: 完成）。
    - **时间胶囊**: 时间显示采用胶囊样式 Badge，清晰易读。
    - **悬浮操作**: 编辑/删除按钮仅在鼠标悬浮 (Hover) 时显示，保持界面整洁。
- **空状态 (Empty State)**:
    - 针对不同过滤条件（如 "全部" vs "特定分类"）展示不同的空状态提示与插画。
- **响应式**:
    - 自适应容器高度，确保内容区域滚动而框架固定。

## 5. 注意事项

- **页面切换**: 从其他页面切换到日程页面时，会调用 `uiStore.setActivePage('schedule')`。
- **数据加载**: `SchedulePage` 挂载时会自动触发 `scheduleStore.loadSchedules()` 确保数据最新。
