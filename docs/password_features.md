# 密码管理器功能文档 (Password Manager Features)

本文档详细说明了应用中的密码管理器功能，包括安全性设计、功能特性以及代码实现细节。

## 1. 功能概述

密码管理器提供了一种安全、加密的方式来存储用户的账号密码信息，支持分类管理、随机密码生成及自动锁定保护。

### 1.1 主要特性
- **安全解锁**: 启动时需输入主密码，界面采用非侵入式嵌入设计，不阻挡侧边栏导航。
- **视图切换**: 支持 **网格视图 (Grid)** 和 **列表视图 (List)** 两种展示模式。
- **网站图标**: 自动获取并显示网站 Favicon，支持在设置中开关。
- **密码生成器**: 内置强密码生成器，支持自定义长度、字符类型（大小写、数字、符号）。
- **强度检测**: 输入密码时实时检测并显示密码强度（弱/中/强/非常强）。
- **自动锁定**: 支持设置闲置自动锁定时间（默认5分钟），保护隐私安全。
- **全局搜索**: 支持搜索标题、用户名、网址、邮箱及备注信息。

## 2. 核心逻辑

### 2.1 数据存储与安全
- **状态管理**: 使用 MobX (`PasswordStore.ts`) 管理全局状态。
- **主密码**: 用于加密/解密本地数据。
    - 设置主密码时会生成随机 Salt。
    - 使用 PBKDF2 或类似机制进行哈希验证（由 Electron 主进程处理）。
- **自动锁定**:
    - 监听全局用户活动 (`mousemove`, `keydown`, `click`, `scroll`)。
    - 超过设定时间无操作自动触发锁定。
    - 锁定状态下数据不可见。

### 2.2 交互设计
- **解锁界面**: 独立的 `UnlockScreen` 组件，居中显示，取代了旧版的模态弹窗，允许用户在未解锁时切换到其他功能模块。
- **添加/编辑**: 
    - 侧滑或弹窗形式录入信息。
    - 集成密码生成器，点击"生成密码"展开面板。
    - 密码可见性切换 (`Eye` / `EyeOff`)。
- **列表交互**:
    - **Grid View**: 卡片式布局，大图标展示，适合快速识别。
    - **List View**: 紧凑行布局，适合大量条目浏览。
    - **复制反馈**: 点击复制按钮会有 Check 图标反馈。
- **设置**: 
    - 调整自动锁定时间。
    - 开关网站图标显示。
    - 打开本地据文件位置。

## 3. 架构与实现

### 3.1 目录结构

```
src/
  ├── store/
  │   └── PasswordStore.ts          # 核心 Store，处理状态、加密调用、自动锁定逻辑
  ├── components/
  │   └── PasswordManager/
  │       ├── PasswordPage.tsx      # 主页面入口，包含 UnlockScreen 和列表渲染
  │       ├── PasswordGenerator.tsx # 密码生成器组件
  │       ├── PasswordItem.tsx      # 网格视图条目组件
  │       └── PasswordListItem.tsx  # 列表视图条目组件
  ├── utils/
  │   └── password-generator.ts     # 密码生成算法与强度计算工具
  └── types/                        # 类型定义 (PasswordEntry, PasswordSettings)
```

### 3.2 关键组件说明

- **UnlockScreen**: 
    - 非 Modal 设计，嵌入在 `PasswordPage` 中。
    - 提供主密码输入框和解锁按钮。
    - 允许用户点击侧边栏离开当前页面。
    
- **PasswordPage**: 
    - 顶层容器，根据 `passwordStore.filteredPasswords` 渲染内容。
    - 头部包含视图切换、设置、修改主密码、手动锁定等操作按钮。
    - 根据 `viewMode` 条件渲染 Grid 或 List。

- **PasswordGenerator**:
    - 独立组件，包含长度滑块和字符选项复选框。
    - 实时计算并显示生成的密码及其强度。

## 4. 未来规划

- **云同步**: 将加密数据同步到云端（需服务器支持）。
- **导入导出**: 支持常见的 CSV 格式导入导出。
- **生物识别**: 集成 TouchID / FaceID 解锁（依赖 Electron 能力）。
